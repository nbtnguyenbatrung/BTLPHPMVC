{% extends 'baseql.html' %}


{% block modal %}
<div class="modal fade bs-example-modal-lg " tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
  align=center>
  <div class="modal-dialog modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-body">
        <div class="row" align=center>
          <h3> Thêm loại sản phẩm cho hệ thống </h3>

          <form class="form-horizontal" method="post" action="/?admin/type-product/add">
            <div class="form-group">
              <label class="control-label col-sm-4" for="name"> Tên Loại sản phẩm * </label>
              <div class="col-sm-8">
                <input type="text" class="form-control" style="width: 70% ;" placeholder="Tên nhóm sản phẩm" name="name"
                  required />
              </div>
            </div>

            <div class="form-group">
              <label class="control-label col-sm-4">Nhóm sản phẩm *</label>
              <div class="col-sm-8">
                <select name="pt_id" id="pt_id" required class="form-control" style="width: 70% ;">
                  <option value=""> chọn nhóm sản phẩm </option>
                  {% for groupProduct in groupProducts %}
                  <option value="{{ groupProduct.pg_id }}">{{ groupProduct.name }} </option>
                  {% endfor %}
                </select>
              </div>
            </div>

            <div class="form-group">
              <div class="col-sm-offset-2 col-sm-10">
                <button type="submit" class="btn btn-primary">Save</button>
              </div>
            </div>
          </form>
        </div>
      </div>

    </div>
  </div>

</div>
{% endblock %}


{% block table %}
<div class="panel panel-default">
  <div class="panel-heading">
    Bảng Loại Sản Phẩm
  </div>
  <div>
    <table class="table" ui-jq="footable" ui-options='{
"paging": {
"enabled": true
},
"filtering": {
"enabled": true
},
"sorting": {
"enabled": true
}}'>
      <thead>
        <tr>
          <th style="text-align:center">Mã Loại Sản Phẩm </th>
          <th style="text-align:center">Tên Loại Sản Phẩm</th>
          <th style="text-align:center">Tác Vụ </th>
        </tr>
      </thead>
      <tbody>
        {% for typeProduct in typeProducts %}
        <tr data-expanded="true" align="center">
          <input type="hidden" name="pg_id" value="{{ typeProduct.pg_id }}" id="pg_id">
          <td>{{ typeProduct.pt_id }}</td>
          <td>{{ typeProduct.name }}</td>
          <td>
            <a class="edittypeproduct">
              <button title=" Sửa " data-toggle="modal" data-target=".bs-example-modal-lg1">
                <i class="fa fa-wrench" style="color : black; "></i>
              </button>
            </a>
            <a data-id="{{ typeProduct.pt_id }}" data-name="{{ typeProduct.name }}"
              onclick="Showconfim(this.getAttribute('data-id') ,this.getAttribute('data-name'))">
              <button title=" xóa ">
                <i class="fa fa-times" style="color : black "></i>
              </button>
            </a>
          </td>
        </tr>
        {% endfor %}

      </tbody>
    </table>

    <!-- phân trang   -->


    <ul class="pagination" role="menubar" aria-label="Pagination">
      {% if ( currentPage > 1 ) %}
      <li><a href="?admin/type-product/index&page=1"><span>First</span></a></li>
      <li><a href="?admin/type-product/index&page={{currentPage-1}}"><span>Previous</span></a></li>
      {% else %}
      <li style="visibility: hidden; "><a href=""><span>First</span></a></li>
      <li style="visibility: hidden; " class="current"><a href=""><span>Previous</span></a></li>
      {% endif %}

      {% for i in 1..totalPage %}
      <li {% if ( currentPage==i ) %} class="current" {% endif %}><a
          href="?admin/type-product/index&page={{i}}">{{i}}</a></li>
      {% endfor %}

      {% if ( currentPage < totalPage ) %} <li><a
          href="?admin/type-product/index&page={{currentPage+1}}"><span>Next</span></a></li>
        <li><a href="?admin/type-product/index&page={{totalPage}}"><span>Last</span></a></li>
        {% else %}
        <li style="visibility: hidden; "><a href=""><span>Next</span></a></li>
        <li style="visibility: hidden; "><a href=""><span>Last</span></a></li>
        {% endif %}

    </ul>


    <!-- Modal -->
    <div class="modal fade" id="ConfimationId" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Thông Báo </h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            Bạn có muốn xóa Loại Sản Phẩm " <span id="LoaispName"></span> " ?
          </div>
          <div class="modal-footer">
            <a id="yesOption" onclick="showinfomation()" type="button" class="btn btn-danger">Yes</a>
            <button type="button" class="btn btn-secondary" data-dismiss="modal">No</button>

          </div>
        </div>
      </div>
    </div>

    <!-- phần modol của edit  -->

    <div class="modal fade bs-example-modal-lg1 myform" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel"
      align=center>
      <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
          <div class="modal-body">
            <div class="row" align=center>
              <h3> Sửa Loại sản phẩm cho web </h3>
              <form class="form-horizontal" method="post" action="/?admin/type-product/update">
                <div class="form-group">
                  <label class="control-label col-sm-4" for="name"> Tên Loại sản phẩm * </label>
                  <div class="col-sm-8">
                    <input type="text" class="form-control" style="width: 70% ;" placeholder="Tên nhóm sản phẩm"
                      name="name" id="nameEdit" required />
                  </div>
                </div>

                <div class="form-group">
                  <label class="control-label col-sm-4">Nhóm sản phẩm *</label>
                  <div class="col-sm-8">
                    <select name="pg_id" id="pg_idEdit" required class="form-control" style="width: 70% ;">
                      <option value=""> chọn nhóm sản phẩm </option>
                      {% for groupProduct in groupProducts %}
                      <option value="{{ groupProduct.pg_id }}">{{ groupProduct.name }} </option>
                      {% endfor %}
                    </select>
                  </div>
                </div>

                <div class="form-group">
                  <div class="col-sm-offset-2 col-sm-10">
                    <button type="submit" class="btn btn-primary">Save Edit</button>
                  </div>
                </div>
              </form>

            </div>
          </div>

        </div>
      </div>

    </div>


  </div>
</div>
{% endblock %}

{% block script %}

<script>

  function Showconfim(id, name) {

    $('#LoaispName').text(name);
    $('#yesOption').attr('href', '/?admin/type-product/' + id + '/delete');
    $('#ConfimationId').modal('show');
  }


  function showinfomation() {
    alert(" xóa dữ liệu thành công  ");
  }

  $(document).ready(function () {
    $('.edittypeproduct').on('click', function () {

      $tr = $(this).closest('tr');
      var data = $tr.children("td").map(function () {
        return $(this).text();
      }).get();
      var data1 = $tr.children("input").map(function () {
        return $(this).text();
      }).get();

      $('#nameEdit').val(data[1]);
      $('#pg_idEdit').val($("#pg_id").val());
    });
  });

</script>

{% endblock %}